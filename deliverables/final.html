<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Final Project | MAD9124</title>
    <meta name="description" content="Mobile API Development">
    
    
    <link rel="preload" href="/assets/css/0.styles.084d7c4c.css" as="style"><link rel="preload" href="/assets/js/app.71c37e52.js" as="script"><link rel="preload" href="/assets/js/11.ae8c26a3.js" as="script"><link rel="prefetch" href="/assets/js/2.6573b30c.js"><link rel="prefetch" href="/assets/js/3.bf2a64fb.js"><link rel="prefetch" href="/assets/js/4.db9b657e.js"><link rel="prefetch" href="/assets/js/5.d875dd4e.js"><link rel="prefetch" href="/assets/js/6.c8e95fd0.js"><link rel="prefetch" href="/assets/js/7.38090071.js"><link rel="prefetch" href="/assets/js/8.bbb7f9ec.js"><link rel="prefetch" href="/assets/js/9.4519aded.js"><link rel="prefetch" href="/assets/js/10.0fd3f93c.js"><link rel="prefetch" href="/assets/js/12.57f9b125.js"><link rel="prefetch" href="/assets/js/13.a589cf42.js"><link rel="prefetch" href="/assets/js/14.3119106c.js"><link rel="prefetch" href="/assets/js/15.c6f416e9.js"><link rel="prefetch" href="/assets/js/16.60cf80b9.js"><link rel="prefetch" href="/assets/js/17.e03883a2.js"><link rel="prefetch" href="/assets/js/18.ca360324.js"><link rel="prefetch" href="/assets/js/19.59eeaff9.js"><link rel="prefetch" href="/assets/js/20.0d907809.js"><link rel="prefetch" href="/assets/js/21.d1a45bec.js"><link rel="prefetch" href="/assets/js/22.56312e0c.js"><link rel="prefetch" href="/assets/js/23.901d07dd.js"><link rel="prefetch" href="/assets/js/24.c90462b4.js"><link rel="prefetch" href="/assets/js/25.0c2b62eb.js"><link rel="prefetch" href="/assets/js/26.4bdddc91.js"><link rel="prefetch" href="/assets/js/27.894b645a.js"><link rel="prefetch" href="/assets/js/28.82a5b267.js"><link rel="prefetch" href="/assets/js/29.a60cef02.js"><link rel="prefetch" href="/assets/js/30.21c01a63.js"><link rel="prefetch" href="/assets/js/31.607866af.js"><link rel="prefetch" href="/assets/js/32.59c25f3c.js"><link rel="prefetch" href="/assets/js/33.996c9705.js"><link rel="prefetch" href="/assets/js/34.6923aabe.js"><link rel="prefetch" href="/assets/js/35.089a238b.js"><link rel="prefetch" href="/assets/js/36.17d82978.js">
    <link rel="stylesheet" href="/assets/css/0.styles.084d7c4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MAD9124</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/deliverables/" class="nav-link router-link-active">Deliverables</a></div><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://classroom.github.com/classrooms/46425465-mobile-api-development" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/deliverables/" class="nav-link router-link-active">Deliverables</a></div><div class="nav-item"><a href="/modules/" class="nav-link">Modules</a></div><div class="nav-item"><a href="/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://classroom.github.com/classrooms/46425465-mobile-api-development" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Introduction</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/overview/" class="sidebar-link">Overview</a></li><li><a href="/overview/course-section-information.html" class="sidebar-link">Course Section Information (CSI)</a></li><li><a href="/overview/contacts.html" class="sidebar-link">Contacts</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Content Modules</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1><span class="week">Final Project</span> <br> <span class="title">Pizza Shop</span></h1> <div class="tip custom-block"><p class="custom-block-title">Due before 11:59 pm on Friday April 26, 2019.</p> <p>Counts for 30% of your MAD9124 final grade.</p></div> <h2 id="joint-project"><a href="#joint-project" aria-hidden="true" class="header-anchor">#</a> Joint Project</h2> <p>The final project will be a two part joint assignment between MAD9124 and MAD9022. Working together with a partner of your choosing, you will build a complete full-stack solution. The web service API portion will be graded for MAD9124, and the front-end application functionality, design, and usability will be graded for MAD9022.</p> <p><strong>Review the <a href="https://prof3ssorst3v3.github.io/mad9022-w19/assignments/api.html" target="_blank" rel="noopener noreferrer">MAD9022 - Web Client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> project details.</strong></p> <div class="danger custom-block"><p class="custom-block-title">ACTION REQUIRED</p> <p>Please send an email to <strong>both</strong> Steve (griffis@algonquincollege.com) and Robert (mckennr@algonquincollege.com) by <strong>Friday, March 29th</strong> to tell us who your partner for the final project will be.</p></div> <h2 id="the-brief"><a href="#the-brief" aria-hidden="true" class="header-anchor">#</a> The Brief</h2> <p>Using Node.js, Express, Mongoose and MongoDB, you will build the RESTful API web service for a prototype of an application to manage a ficticious Pizza Shop. This initial proof of concept (PoC) will have limited capabilities but should demonstrate the potential of a full-scale application.</p> <p>Your PoC will allow authenticated staff users to perform basic CRUD operations on two primary resources: <strong>pizzas</strong> and <strong>ingredients</strong>. Pizzas will have a <em>hasMany</em> relationship to ingredients, and the price of the pizza will be derived from the cumulative price of the related ingredients.</p> <p>The ingredients objects will keep track of their available inventory as orders are processed and any pizza relying on an ingredient that is out of stock will not be available for ordering.</p> <p>Any user (authenticated or not) will be able to list the available pizzas and ingredients. They will also be able to see the full details for any given item.</p> <p>Any logged-in user (customer or staff) can create an order. An order will include one or more pizzas, and the total price will be calculated based on the combined price of the pizzas, plus an optional delivery charge and sales tax. To keep things simple we will assume that there is a flat rate delivery charge of $5.00 and all orders are subject the Ontario HST rate of 13%. The order price, tax and total should be automatically calculated on save.</p> <p>The PoC will also need to support user registration, login and password updates.</p> <p>This early prototype will not need to deal with payment processing, but should store all money values as integers in cents (e.g. $5.00 == 500Â¢). This will ensure easy future compatibility with popular payment processing services like <a href="https://stripe.com/ca" target="_blank" rel="noopener noreferrer">Stripe<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Of course these should be converted to dollars for display in the client application.</p> <h2 id="core-requirements"><a href="#core-requirements" aria-hidden="true" class="header-anchor">#</a> Core Requirements</h2> <ul><li><p>Implement basic user user management functions</p> <ul><li>registration</li> <li>authentication with JWT</li> <li>change password</li> <li>get current logged-in user</li></ul></li> <li><p>Protected API routes require a valid JWT in the <code>bearer</code> header.</p></li> <li><p>Middleware functions should be employed to avoid repetitive route handler code.</p></li> <li><p>Single resource requests should return any related resources as fully populated embedded documents.</p></li> <li><p>Resource list requests should return an array of the primary resource objects only, without populating any related objects.</p></li> <li><p>All requests containing user/client supplied data should be sanitized to protect against XSS and Query Injection attacks.</p></li> <li><p>All schema validation errors should be caught and returned to the client in the standard JSON:API error format.</p></li></ul> <h3 id="response-payload"><a href="#response-payload" aria-hidden="true" class="header-anchor">#</a> Response Payload</h3> <ul><li>All responses will be in the form of a JSON formatted object.</li> <li>This payload object must include one of (but not both at the same time) a <code>data</code> property or an <code>errors</code> property.</li> <li>For &quot;list&quot; routes, the <code>data</code> property must be populated an array of zero or more of the requested resource objects.</li> <li>For &quot;retrieve&quot; routes, the <code>data</code> property must be populated with a single resource object.</li> <li>If the requested single resource does not exist, a 404 error repsponse should be sent.</li> <li>Error responses will conform to the JSON:API standard.</li></ul> <h4 id="example-data-response"><a href="#example-data-response" aria-hidden="true" class="header-anchor">#</a> Example Data Response</h4> <p>GET /auth/users/me</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Yo-Yo&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ma&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;me@yo-yoma.com&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="example-errors-response"><a href="#example-errors-response" aria-hidden="true" class="header-anchor">#</a> Example Errors Response</h4> <p>POST /auth/users</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;400&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Validation Error&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;detail&quot;</span><span class="token operator">:</span> <span class="token string">&quot;minnie.mouse@disney is not a valid email address.&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;pointer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/data/attributes/email&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="auth-routes"><a href="#auth-routes" aria-hidden="true" class="header-anchor">#</a> Auth Routes</h2> <p>The user management actions will be exposed separately from the main API routes and will use the <code>/auth</code> route prefix.</p> <table><thead><tr><th style="text-align:left">Action</th> <th style="text-align:left">Method</th> <th style="text-align:left">Resource Path</th> <th style="text-align:left">Example Request Payload</th></tr></thead> <tbody><tr><td style="text-align:left">Register User</td> <td style="text-align:left">POST</td> <td style="text-align:left">/auth/users</td> <td style="text-align:left">{ <br>Â Â &quot;firstName&quot;: &quot;Yo-Yo&quot;, <br>Â Â &quot;lastName&quot;: &quot;Ma&quot;, <br>Â Â &quot;email&quot;: &quot;me@yo-yoma.com&quot;, <br>Â Â &quot;password&quot;: &quot;myPassword&quot;<br>}</td></tr> <tr><td style="text-align:left">Get Logged-in User</td> <td style="text-align:left">GET</td> <td style="text-align:left">/auth/users/me</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Update Password</td> <td style="text-align:left">PATCH</td> <td style="text-align:left">/auth/users/me</td> <td style="text-align:left">{ &quot;password&quot;: &quot;newPassword&quot; }</td></tr> <tr><td style="text-align:left">Login User</td> <td style="text-align:left">POST</td> <td style="text-align:left">/auth/tokens</td> <td style="text-align:left">{ <br>Â Â &quot;email&quot;: &quot;me@yo-yoma.com&quot;, <br>Â Â &quot;password&quot;: &quot;myPassword&quot;<br>}</td></tr></tbody></table> <div class="warning custom-block"><p class="custom-block-title">5 Point Bonus - Staff Registration</p> <p>Normally users would not be allowed to self-register as an admin / staff user. We will allow it for this PoC project to simplify testing. However, if you are feeling ambitious you can earn an extra 5 bonus points if the API discards the <code>isStaff</code> property on the registration route and adds an additional <code>PATCH /auth/users:id</code> route that allows only properly authenticated staff users to set set the <code>isStaff</code> property for another user.</p> <p><strong>TIP</strong> You will need to use MongoDB Compass to manually update the <code>isStaff</code> property on the first user.</p></div> <h2 id="api-routes"><a href="#api-routes" aria-hidden="true" class="header-anchor">#</a> API Routes</h2> <p>The primary application capabilities will be grouped under the <code>/api</code> resource route prefix. Some routes will be unrestricted, while others will be limited to authenticated users. Access to routes relating to creating, updating or deleting pizzas and ingredients will be limited to authenticated staff users only.</p> <p>The client application must send a valid JWT in the <code>bearer</code> header property for all <code>/api</code> routes requiring users to be authenticated.</p> <h3 id="unauthenticated-routes"><a href="#unauthenticated-routes" aria-hidden="true" class="header-anchor">#</a> Unauthenticated Routes</h3> <table><thead><tr><th style="text-align:left">Action</th> <th style="text-align:left">Method</th> <th style="text-align:left">Resource Path</th> <th style="text-align:left">Notes</th></tr></thead> <tbody><tr><td style="text-align:left">List all available pizzas</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/pizzas</td> <td style="text-align:left">Ingredients not populated</td></tr> <tr><td style="text-align:left">Get details for a pizza</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/pizzas/:id</td> <td style="text-align:left">Ingredients fully populated</td></tr> <tr><td style="text-align:left"></td> <td style="text-align:left"></td> <td style="text-align:left"></td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">List all available ingredients</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/ingredients/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Get details for an ingredient</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/ingredients/:id</td> <td style="text-align:left"></td></tr></tbody></table> <div class="warning custom-block"><p class="custom-block-title">5 Point Bonus - Query Strings</p> <p>Ingredient list requests should allow the client to optionally request that the returned results be filtered to exlcude any items that are out of stock. The mechanism for this query filtering is the use of <code>query string parameters</code> e.g.</p> <div class="language- extra-class"><pre class="language-text"><code>https://pizzashop.ca/api/ingredients?instock=true
</code></pre></div><p>Similarly, the same <code>?instock=true</code> filter on Pizza list requests should exclude any pizza with one or more ingredients out of stock.</p></div> <h3 id="authenticated-user-routes"><a href="#authenticated-user-routes" aria-hidden="true" class="header-anchor">#</a> Authenticated User Routes</h3> <table><thead><tr><th style="text-align:left">Action</th> <th style="text-align:left">Method</th> <th style="text-align:left">Resource Path</th> <th style="text-align:left">Notes</th></tr></thead> <tbody><tr><td style="text-align:left">Create an order</td> <td style="text-align:left">POST</td> <td style="text-align:left">/api/orders</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">List all orders</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/orders</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Get details for an order</td> <td style="text-align:left">GET</td> <td style="text-align:left">/api/orders/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Replace an order</td> <td style="text-align:left">PUT</td> <td style="text-align:left">/api/orders/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Update an order</td> <td style="text-align:left">PATCH</td> <td style="text-align:left">/api/orders/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Cancel an order</td> <td style="text-align:left">DELETE</td> <td style="text-align:left">/api/orders/:id</td> <td style="text-align:left"></td></tr></tbody></table> <p>Non-staff users should only see or act on their own orders. Staff users should be able to see and act on any order in the system.</p> <h3 id="authenticated-staff-user-routes"><a href="#authenticated-staff-user-routes" aria-hidden="true" class="header-anchor">#</a> Authenticated Staff User Routes</h3> <table><thead><tr><th style="text-align:left">Action</th> <th style="text-align:left">Method</th> <th style="text-align:left">Resource Path</th> <th style="text-align:left">Notes</th></tr></thead> <tbody><tr><td style="text-align:left">Create a pizza</td> <td style="text-align:left">POST</td> <td style="text-align:left">/api/pizzas</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Replace a pizza</td> <td style="text-align:left">PUT</td> <td style="text-align:left">/api/pizzas/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Update a pizza</td> <td style="text-align:left">PATCH</td> <td style="text-align:left">/api/pizzas/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Remove a pizza</td> <td style="text-align:left">DELETE</td> <td style="text-align:left">/api/pizzas/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left"></td> <td style="text-align:left"></td> <td style="text-align:left"></td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Create an ingredient</td> <td style="text-align:left">POST</td> <td style="text-align:left">/api/ingredients</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Replace an ingredient</td> <td style="text-align:left">PUT</td> <td style="text-align:left">/api/ingredients/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Update an ingredient</td> <td style="text-align:left">PATCH</td> <td style="text-align:left">/api/ingredients/:id</td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">Remove an ingredient</td> <td style="text-align:left">DELETE</td> <td style="text-align:left">/api/ingredients/:id</td> <td style="text-align:left"></td></tr></tbody></table> <h2 id="resource-schema"><a href="#resource-schema" aria-hidden="true" class="header-anchor">#</a> Resource Schema</h2> <p>There are four required model classes. Their schema requirements are listed below.</p> <h3 id="ingredient"><a href="#ingredient" aria-hidden="true" class="header-anchor">#</a> Ingredient</h3> <table><thead><tr><th style="text-align:left">Property</th> <th style="text-align:left">Type</th> <th style="text-align:left">Required</th> <th style="text-align:right">Max (length/value)</th> <th style="text-align:right">Default</th></tr></thead> <tbody><tr><td style="text-align:left">name</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">64</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">price</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">10000</td> <td style="text-align:right">100</td></tr> <tr><td style="text-align:left">quantity</td> <td style="text-align:left">Number (integer)</td> <td style="text-align:left"></td> <td style="text-align:right">1000</td> <td style="text-align:right">10</td></tr> <tr><td style="text-align:left">isGlutenFree</td> <td style="text-align:left">Boolean</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right">false</td></tr> <tr><td style="text-align:left">imageUrl</td> <td style="text-align:left">String</td> <td style="text-align:left"></td> <td style="text-align:right">1024</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">categories</td> <td style="text-align:left">[ENUM ['meat', 'spicy', 'vegitarian', 'vegan', 'halal', 'kosher', 'cheeze', 'seasonings'] ]</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right"></td></tr></tbody></table> <p>The <code>categories</code> property should accept an array of zero or more lowercase strings from the enumerated list: 'meat', 'spicy', 'vegitarian', 'vegan', 'halal', 'kosher', 'cheeze', 'seasonings'.</p> <h3 id="pizza"><a href="#pizza" aria-hidden="true" class="header-anchor">#</a> Pizza</h3> <table><thead><tr><th style="text-align:left">Property</th> <th style="text-align:left">Type</th> <th style="text-align:left">Required</th> <th style="text-align:right">Min</th> <th style="text-align:right">Max</th> <th style="text-align:right">Default</th></tr></thead> <tbody><tr><td style="text-align:left">name</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">4</td> <td style="text-align:right">64</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">price</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">1000</td> <td style="text-align:right">10000</td> <td style="text-align:right">1000</td></tr> <tr><td style="text-align:left">size</td> <td style="text-align:left">ENUM ['small', 'medium', 'large', 'extra large']</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right"></td> <td style="text-align:right">small</td></tr> <tr><td style="text-align:left">isGlutenFree</td> <td style="text-align:left">Boolean</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right"></td> <td style="text-align:right">false</td></tr> <tr><td style="text-align:left">imageUrl</td> <td style="text-align:left">String</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right">1024</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">ingredients</td> <td style="text-align:left">[ ObjectId, ref: 'Ingredient' ]</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right"></td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">extraToppings</td> <td style="text-align:left">[ ObjectId, ref: 'Ingredient' ]</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:right"></td> <td style="text-align:right"></td></tr></tbody></table> <p>To be clear the <code>ingredients</code> and <code>extraToppings</code> properties should each hold an array of zero or more ObjectId references to the ingredients collection.</p> <p>If the client application supports customizing the pizza at order time, the additional ingredients should be stored in the <code>extraToppings</code> array and this should automatically update the price on save.</p> <h3 id="order"><a href="#order" aria-hidden="true" class="header-anchor">#</a> Order</h3> <table><thead><tr><th style="text-align:left">Property</th> <th style="text-align:left">Type</th> <th style="text-align:left">Required</th> <th style="text-align:right">Default</th></tr></thead> <tbody><tr><td style="text-align:left">customer</td> <td style="text-align:left">ObjectId, ref: 'User'</td> <td style="text-align:left">true</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">type</td> <td style="text-align:left">ENUM ['pickup', 'delivery']</td> <td style="text-align:left"></td> <td style="text-align:right">pickup</td></tr> <tr><td style="text-align:left">status</td> <td style="text-align:left">ENUM ['draft', 'ordered', 'paid', 'delivered']</td> <td style="text-align:left"></td> <td style="text-align:right">draft</td></tr> <tr><td style="text-align:left">pizzas</td> <td style="text-align:left">[ ObjectId, ref: 'Pizza' ]</td> <td style="text-align:left"></td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">address</td> <td style="text-align:left">String</td> <td style="text-align:left">if type is delivery</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">price</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">0</td></tr> <tr><td style="text-align:left">deliveryCharge</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">0, 500 if type is delivery</td></tr> <tr><td style="text-align:left">tax</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">0</td></tr> <tr><td style="text-align:left">total</td> <td style="text-align:left">Number (integer in cents)</td> <td style="text-align:left"></td> <td style="text-align:right">0</td></tr> <tr><td style="text-align:left">createdAt</td> <td style="text-align:left">Date</td> <td style="text-align:left"></td> <td style="text-align:right">Date.now()</td></tr> <tr><td style="text-align:left">updatedAt</td> <td style="text-align:left">Date</td> <td style="text-align:left"></td> <td style="text-align:right">Date.now()</td></tr></tbody></table> <p>The <code>createdAt</code> and <code>updatedAt</code> properties should be <a href="https://mongoosejs.com/docs/guide.html#timestamps" target="_blank" rel="noopener noreferrer">set automatically by the database<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Any client supplied data for these two properties should be discarded.</p> <h3 id="user"><a href="#user" aria-hidden="true" class="header-anchor">#</a> User</h3> <table><thead><tr><th style="text-align:left">Property</th> <th style="text-align:left">Type</th> <th style="text-align:left">Required</th> <th style="text-align:right">Max Length</th> <th style="text-align:left">Default</th> <th style="text-align:left">Unique</th></tr></thead> <tbody><tr><td style="text-align:left">firstName</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">64</td> <td style="text-align:left"></td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">lastName</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">64</td> <td style="text-align:left"></td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">email</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">512</td> <td style="text-align:left"></td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">password</td> <td style="text-align:left">String</td> <td style="text-align:left">true</td> <td style="text-align:right">70</td> <td style="text-align:left"></td> <td style="text-align:left"></td></tr> <tr><td style="text-align:left">isStaff</td> <td style="text-align:left">Boolean</td> <td style="text-align:left"></td> <td style="text-align:right"></td> <td style="text-align:left">false</td> <td style="text-align:left"></td></tr></tbody></table> <p>The <code>email</code> property must be a correctly formatted email, and must be unique in the database. This check should be done with a custom schema validator function.</p> <p>The <code>password</code> property must be encrypted using the <code>bcrypt</code> library. This should be done in a <code>schema.pre('save')</code> method. The <code>password</code> property should always be redacted from response data and never returned to the client.</p> <h2 id="logistics"><a href="#logistics" aria-hidden="true" class="header-anchor">#</a> Logistics</h2> <ul><li>Accept this <a href="https://classroom.github.com/a/kE72Z5rt" target="_blank" rel="noopener noreferrer">GitHub Classroom assignment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> invitation.</li> <li>Clone the repo to your latptop.</li> <li>Update the <code>package.json</code> file.</li> <li>Build the project on your laptop.</li> <li>Test each route with Postman, making sure to test both valid and invalid data.</li> <li>Make git commits as you complete each requirement.</li> <li>When everything is complete, push the final commit back up to GitHub and submit the GitHub repo's URL on Brightspace.</li></ul> <div class="tip custom-block"><p class="custom-block-title">Remember</p> <p>It is a good habit to make a git commit as you complete each logical requirement. This not only tracks your progress, but protects your working code in case you later break it and need to roll back.</p></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/23/2019, 3:05:48 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/11.ae8c26a3.js" defer></script><script src="/assets/js/app.71c37e52.js" defer></script>
  </body>
</html>
